stages:
        - build
        - deploy
        - restart

build-maven:
        stage: build
        script: /usr/bin/mvn clean install
        artifacts:
            paths:
                - target/*.jar
            expire_in: 1 day
        only:
                - main

deploy-packatt:
        stage: deploy
        script:
          - /usr/bin/rm /opt/pakcatt/pakcatt-0.1.jar
          - /usr/bin/cp ./target/pakcatt-0.1.jar /opt/pakcatt/
        only:
                - main

run-packatt:
        stage: restart
        script: /usr/sbin/service pakcatt restart
        only:
                - main
